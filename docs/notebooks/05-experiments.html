
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Experiments &#8212; prayas 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Modules" href="../modules/index.html" />
    <link rel="prev" title="One option vs. multi-options model" href="04-one-vs-multi.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 5.5ex;
    padding-top: 0.3rem;
    padding-right: 0.3rem;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 0.3rem;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Experiments">
<h1>Experiments<a class="headerlink" href="#Experiments" title="Permalink to this headline">¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">prayas</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<p>Experiments provide a simple way to continuously monitor the experiment performance and to decide when to stop based on the maximum potential loss of the variants. We first set up the experiment by defining the model, baseline, and measures of interest:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">e</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;moonshot1&quot;</span><span class="p">)</span>

<span class="n">e</span><span class="o">.</span><span class="n">setup</span> <span class="o">=</span> <span class="n">OneOptionModel</span><span class="p">([</span><span class="s2">&quot;apollo&quot;</span><span class="p">,</span> <span class="s2">&quot;gemini&quot;</span><span class="p">],</span> <span class="n">baseline</span><span class="o">=</span><span class="s2">&quot;apollo&quot;</span><span class="p">)</span>
<span class="n">e</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">add_measure</span><span class="p">(</span><span class="s2">&quot;revenue&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">80</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">setup</span><span class="o">.</span><span class="n">primary_measure</span> <span class="o">=</span> <span class="s2">&quot;revenue&quot;</span>
</pre></div>
</div>
</div>
<p>The specification of the experiment is:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Experiment with a One option model
Variants              : apollo, gemini
Baseline              : apollo
Measures              : conversion, revenue
Primary measure       : revenue
Maximum loss threshold: 5
</pre></div></div>
</div>
<p>Then we add the first daily data we collected:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190730&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span> <span class="p">[</span> <span class="mi">186</span><span class="p">,</span>  <span class="mi">180</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190731&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="mi">7</span><span class="p">,</span>  <span class="mi">1</span><span class="p">],</span> <span class="p">[</span> <span class="mi">714</span><span class="p">,</span>  <span class="mi">652</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>We can compute the daily scoring against the baseline:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">e</span><span class="o">.</span><span class="n">monitor_score_baseline</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Date</th>
      <th>Variant</th>
      <th>Measure</th>
      <th>ProbabilityToBeBest</th>
      <th>ProbabilityToBeatBaseline</th>
      <th>UpliftFromBaseline</th>
      <th>PotentialLossFromBaseline</th>
      <th>MaxUplift</th>
      <th>MaxPotentialLoss</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>20190730</td>
      <td>apollo</td>
      <td>revenue</td>
      <td>0.52400</td>
      <td>0.0000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>9.784740</td>
      <td>47.546597</td>
    </tr>
    <tr>
      <th>1</th>
      <td>20190730</td>
      <td>gemini</td>
      <td>conversion</td>
      <td>0.50270</td>
      <td>0.5119</td>
      <td>3.599060</td>
      <td>49.631761</td>
      <td>2.128436</td>
      <td>48.418039</td>
    </tr>
    <tr>
      <th>2</th>
      <td>20190730</td>
      <td>apollo</td>
      <td>conversion</td>
      <td>0.49730</td>
      <td>0.0000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-2.084078</td>
      <td>50.932533</td>
    </tr>
    <tr>
      <th>3</th>
      <td>20190730</td>
      <td>gemini</td>
      <td>revenue</td>
      <td>0.47600</td>
      <td>0.4783</td>
      <td>-7.189932</td>
      <td>52.351470</td>
      <td>-8.912659</td>
      <td>52.510509</td>
    </tr>
    <tr>
      <th>4</th>
      <td>20190731</td>
      <td>apollo</td>
      <td>revenue</td>
      <td>0.98215</td>
      <td>0.0000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>314.532699</td>
      <td>0.888369</td>
    </tr>
    <tr>
      <th>5</th>
      <td>20190731</td>
      <td>apollo</td>
      <td>conversion</td>
      <td>0.97250</td>
      <td>0.0000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>265.239365</td>
      <td>1.642050</td>
    </tr>
    <tr>
      <th>6</th>
      <td>20190731</td>
      <td>gemini</td>
      <td>conversion</td>
      <td>0.02750</td>
      <td>0.0257</td>
      <td>-72.822973</td>
      <td>73.236028</td>
      <td>-72.620695</td>
      <td>72.950166</td>
    </tr>
    <tr>
      <th>7</th>
      <td>20190731</td>
      <td>gemini</td>
      <td>revenue</td>
      <td>0.01785</td>
      <td>0.0183</td>
      <td>-75.656182</td>
      <td>75.981442</td>
      <td>-75.876451</td>
      <td>75.889115</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>To easily compare the performance of the variants over time, we suggest to look at the maximum potential loss per variant:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">e</span><span class="o">.</span><span class="n">monitor_plot</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_05-experiments_11_0.png" src="../_images/notebooks_05-experiments_11_0.png" />
</div>
</div>
<p>The plot shows the maximum potential loss over time; the dashed line is the maximum loss threshold set for the experiment (default: 0.05).</p>
<p>As the experiment continues, we add more daily data:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190730&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">],</span> <span class="p">[</span> <span class="mi">186</span><span class="p">,</span>  <span class="mi">180</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190731&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="mi">7</span><span class="p">,</span>  <span class="mi">1</span><span class="p">],</span> <span class="p">[</span> <span class="mi">714</span><span class="p">,</span>  <span class="mi">652</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190801&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span>  <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">1233</span><span class="p">,</span> <span class="mi">1141</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190802&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span>  <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">1744</span><span class="p">,</span> <span class="mi">1681</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190803&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">21</span><span class="p">,</span> <span class="mi">13</span><span class="p">],</span> <span class="p">[</span><span class="mi">2304</span><span class="p">,</span> <span class="mi">2146</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190804&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">26</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span> <span class="p">[</span><span class="mi">2835</span><span class="p">,</span> <span class="mi">2719</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190805&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">29</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">3275</span><span class="p">,</span> <span class="mi">3260</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190806&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">36</span><span class="p">,</span> <span class="mi">23</span><span class="p">],</span> <span class="p">[</span><span class="mi">3741</span><span class="p">,</span> <span class="mi">3805</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190807&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">43</span><span class="p">,</span> <span class="mi">26</span><span class="p">],</span> <span class="p">[</span><span class="mi">4343</span><span class="p">,</span> <span class="mi">4354</span><span class="p">])</span>
<span class="n">e</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="s2">&quot;20190808&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">51</span><span class="p">,</span> <span class="mi">32</span><span class="p">],</span> <span class="p">[</span><span class="mi">4863</span><span class="p">,</span> <span class="mi">4921</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>And we continue to investigate the result:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">e</span><span class="o">.</span><span class="n">monitor_plot</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_05-experiments_15_0.png" src="../_images/notebooks_05-experiments_15_0.png" />
</div>
</div>
<p>In this example, the loss of the ‘apollo’ variant is below the threshold after a few days and continues to stay below. We decide to stop an experiment with a result if a variant is below the threshold for a consecutive number of days:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">e</span><span class="o">.</span><span class="n">monitor_decision</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Timestamp</th>
      <th>Loss apollo</th>
      <th>Loss gemini</th>
      <th>Runs apollo</th>
      <th>Runs gemini</th>
      <th>Max loss apollo</th>
      <th>Max loss gemini</th>
      <th>Stop apollo</th>
      <th>Stop gemini</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>20190730</td>
      <td>48.266853</td>
      <td>51.491613</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>1</th>
      <td>20190731</td>
      <td>1.069647</td>
      <td>75.996100</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2</th>
      <td>20190801</td>
      <td>0.717000</td>
      <td>59.209678</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>3</th>
      <td>20190802</td>
      <td>1.208869</td>
      <td>48.692807</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>4</th>
      <td>20190803</td>
      <td>1.305198</td>
      <td>40.086982</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>48.266853</td>
      <td>75.996100</td>
      <td>False</td>
      <td>False</td>
    </tr>
    <tr>
      <th>5</th>
      <td>20190804</td>
      <td>0.598810</td>
      <td>42.075643</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>1.305198</td>
      <td>75.996100</td>
      <td>True</td>
      <td>False</td>
    </tr>
    <tr>
      <th>6</th>
      <td>20190805</td>
      <td>0.677079</td>
      <td>37.922837</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>1.305198</td>
      <td>59.209678</td>
      <td>True</td>
      <td>False</td>
    </tr>
    <tr>
      <th>7</th>
      <td>20190806</td>
      <td>0.154403</td>
      <td>43.471300</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>1.305198</td>
      <td>48.692807</td>
      <td>True</td>
      <td>False</td>
    </tr>
    <tr>
      <th>8</th>
      <td>20190807</td>
      <td>0.052977</td>
      <td>45.669064</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>1.305198</td>
      <td>45.669064</td>
      <td>True</td>
      <td>False</td>
    </tr>
    <tr>
      <th>9</th>
      <td>20190808</td>
      <td>0.037551</td>
      <td>44.192609</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>0.677079</td>
      <td>45.669064</td>
      <td>True</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Following this rule, we could have stopped the experiment already on <code class="docutils literal notranslate"><span class="pre">2019-08-04</span></code>. We can access the last model of the experiment and do the same analysis as already shown in the other example notebooks:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">e</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">score_baseline</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Variant</th>
      <th>Measure</th>
      <th>ProbabilityToBeBest</th>
      <th>ProbabilityToBeatBaseline</th>
      <th>UpliftFromBaseline</th>
      <th>PotentialLossFromBaseline</th>
      <th>MaxUplift</th>
      <th>MaxPotentialLoss</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>apollo</td>
      <td>revenue</td>
      <td>0.99670</td>
      <td>0.00000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>79.254505</td>
      <td>0.037169</td>
    </tr>
    <tr>
      <th>1</th>
      <td>apollo</td>
      <td>conversion</td>
      <td>0.98365</td>
      <td>0.00000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>59.268571</td>
      <td>0.186129</td>
    </tr>
    <tr>
      <th>2</th>
      <td>gemini</td>
      <td>conversion</td>
      <td>0.01635</td>
      <td>0.01495</td>
      <td>-37.287659</td>
      <td>37.448505</td>
      <td>-37.212973</td>
      <td>37.387003</td>
    </tr>
    <tr>
      <th>3</th>
      <td>gemini</td>
      <td>revenue</td>
      <td>0.00330</td>
      <td>0.00380</td>
      <td>-44.270473</td>
      <td>44.282816</td>
      <td>-44.213397</td>
      <td>44.089087</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">e</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">plot</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_05-experiments_20_0.png" src="../_images/notebooks_05-experiments_20_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_05-experiments_20_1.png" src="../_images/notebooks_05-experiments_20_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">e</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">decision</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Variant</th>
      <th>Measure</th>
      <th>ProbabilityToBeBest</th>
      <th>ProbabilityToBeatBaseline</th>
      <th>UpliftFromBaseline</th>
      <th>PotentialLossFromBaseline</th>
      <th>MaxUplift</th>
      <th>MaxPotentialLoss</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>apollo</td>
      <td>revenue</td>
      <td>0.99595</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>79.510021</td>
      <td>0.03168</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Based on the primary measure defined for this experiment, we would go with the variant ‘apollo’.</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<!--<h1 class="logo"><a href="../index.html">prayas</a></h1>-->
<h1 class="logo">prayas</h1>








<!--<h3>Navigation</h3>-->
<ul>
    <li class="toctree-l1"><a href="../index.html">Welcome</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../examples.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01-one-option-model.html">One option model</a></li>
<li class="toctree-l2"><a class="reference internal" href="02-multi-options-model.html">Multi-options model</a></li>
<li class="toctree-l2"><a class="reference internal" href="03-aggregated-model.html">Aggregated model</a></li>
<li class="toctree-l2"><a class="reference internal" href="04-one-vs-multi.html">One option vs. multi-options model</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Experiments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../modules/index.html">Modules</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../examples.html">Examples</a><ul>
      <li>Previous: <a href="04-one-vs-multi.html" title="previous chapter">One option vs. multi-options model</a></li>
      <li>Next: <a href="../modules/index.html" title="next chapter">Modules</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019-2020 Avira Operations GmbH & Co. KG.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/notebooks/05-experiments.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>